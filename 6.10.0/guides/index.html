<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="B2i Healthcare">
<title>Snow Owl Server Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Snow Owl Server Documentation</h1>
<div class="details">
<span id="author" class="author">B2i Healthcare</span><br>
<span id="email" class="email"><a href="mailto:support@b2i.sg">support@b2i.sg</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#_installation_requirements">Installation requirements</a>
<ul class="sectlevel3">
<li><a href="#_client_side_requirements">Client-side requirements</a>
<ul class="sectlevel4">
<li><a href="#_hardware_requirements">Hardware requirements</a></li>
</ul>
</li>
<li><a href="#_server_side_requirements">Server-side requirements</a>
<ul class="sectlevel4">
<li><a href="#_hardware_requirements_2">Hardware requirements</a></li>
<li><a href="#_software_requirements">Software Requirements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_installing">Installing</a>
<ul class="sectlevel3">
<li><a href="#_operating_system">Operating system</a></li>
<li><a href="#_network">Network</a></li>
<li><a href="#_database">Database</a></li>
<li><a href="#_configuring_database">Configuring database</a></li>
<li><a href="#_java">Java</a></li>
<li><a href="#_ldap">LDAP</a></li>
<li><a href="#_configuring_ldap">Configuring LDAP</a>
<ul class="sectlevel4">
<li><a href="#_using_ldif_dumps">Using LDIF dumps</a></li>
<li><a href="#_using_apache_directory_studio">Using Apache Directory Studio</a></li>
<li><a href="#_creating_a_new_user_using_apache_directory_studio">Creating a new user using Apache Directory Studio</a></li>
</ul>
</li>
<li><a href="#_snow_owl_server">Snow Owl Server</a>
<ul class="sectlevel4">
<li><a href="#_update_snow_owl_s_configuration">Update Snow Owl&#8217;s Configuration</a></li>
<li><a href="#_memory_settings">Memory settings</a></li>
<li><a href="#_osgi_console">OSGi console</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_web_server_configuration">Web Server Configuration</a></li>
<li><a href="#_web_server_administrative_console_application">Web Server Administrative Console application</a></li>
<li><a href="#_virgo_documentation">Virgo documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_administration">Administration</a>
<ul class="sectlevel2">
<li><a href="#_startup_and_shutdown">Startup and shutdown</a></li>
<li><a href="#_importing_snomed_ct_content">Importing SNOMED CT content</a>
<ul class="sectlevel3">
<li><a href="#_starting_the_import">Starting the import</a>
<ul class="sectlevel4">
<li><a href="#_release_decriptor_file">Release decriptor file</a></li>
</ul>
</li>
<li><a href="#_examples">Examples</a>
<ul class="sectlevel4">
<li><a href="#_international_import">International import</a></li>
<li><a href="#_extension_import">Extension import</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_single_administrator_operations">Single administrator operations</a>
<ul class="sectlevel3">
<li><a href="#_steps_to_perform_single_admin_operations">Steps to perform single admin operations</a></li>
<li><a href="#_impersonating_users">Impersonating users</a></li>
</ul>
</li>
<li><a href="#_taking_backups">Taking backups</a>
<ul class="sectlevel3">
<li><a href="#__hot_backups">"Hot" backups</a></li>
<li><a href="#__cold_backups">"Cold" backups</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_user_and_access_control">User and Access control</a>
<ul class="sectlevel2">
<li><a href="#_permissions">Permissions</a></li>
<li><a href="#_default_roles">Default Roles</a></li>
<li><a href="#_customizing_access_control">Customizing access control</a>
<ul class="sectlevel3">
<li><a href="#_customize_schema">Customize schema</a></li>
<li><a href="#_import_default_configuration">Import default configuration</a></li>
<li><a href="#_add_new_user">Add new user</a></li>
<li><a href="#_modify_access_control">Modify access control</a>
<ul class="sectlevel4">
<li><a href="#_create_new_role">Create new Role</a></li>
<li><a href="#_modify_roles">Modify Roles</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_console_command_reference">Console command reference</a>
<ul class="sectlevel2">
<li><a href="#_general">General</a>
<ul class="sectlevel3">
<li><a href="#_disconnecting_from_the_console">Disconnecting from the console</a></li>
</ul>
</li>
<li><a href="#_available_commands">Available commands</a>
<ul class="sectlevel3">
<li><a href="#_scripting">Scripting</a>
<ul class="sectlevel4">
<li><a href="#_execute_groovy_script">Execute Groovy script</a></li>
</ul>
</li>
<li><a href="#_machine_readable_concept_model">Machine-Readable Concept Model</a>
<ul class="sectlevel4">
<li><a href="#_import_mrcm_rules_from_xmi_file">Import MRCM rules from XMI file</a></li>
<li><a href="#_export_mrcm_rules_to_an_xmi_file">Export MRCM rules to an XMI file</a></li>
</ul>
</li>
<li><a href="#_terminology_registry">Terminology registry</a>
<ul class="sectlevel4">
<li><a href="#_list_all_imported_terminologies">List all imported terminologies</a></li>
</ul>
</li>
<li><a href="#_snomed_ct_owl_ontology_reasoner">SNOMED CT OWL Ontology (reasoner)</a>
<ul class="sectlevel4">
<li><a href="#_display_available_reasoners">Display available reasoners</a></li>
<li><a href="#_change_the_active_reasoner">Change the active reasoner</a></li>
<li><a href="#_checking_status_of_available_reasoners">Checking status of available reasoners</a></li>
</ul>
</li>
<li><a href="#_snomed_ct">SNOMED CT</a>
<ul class="sectlevel4">
<li><a href="#_import_reference_sets_in_rf2_format_from_a_release_text_file">Import reference sets in RF2 format from a release text file</a></li>
<li><a href="#_import_reference_sets_in_dsv_format">Import reference sets in DSV format</a></li>
</ul>
</li>
<li><a href="#_diagnostics_and_maintenance">Diagnostics and maintenance</a></li>
<li><a href="#_session_management">Session management</a>
<ul class="sectlevel4">
<li><a href="#_display_connected_users_and_session_identifiers">Display connected users and session identifiers</a></li>
<li><a href="#_send_message_to_users">Send message to users</a></li>
<li><a href="#_restrict_user_logins">Restrict user logins</a></li>
<li><a href="#_disconnect_users">Disconnect users</a></li>
</ul>
</li>
<li><a href="#_repository_management">Repository management</a>
<ul class="sectlevel4">
<li><a href="#_display_terminology_repositories">Display terminology repositories</a></li>
<li><a href="#_display_currently_held_locks">Display currently held locks</a></li>
<li><a href="#_lock_and_release_areas_of_terminology_stores">Lock and release areas of terminology stores</a></li>
<li><a href="#_forcefully_unlock_stuck_locks">Forcefully unlock stuck locks</a></li>
</ul>
</li>
<li><a href="#_remote_jobs">Remote jobs</a>
<ul class="sectlevel4">
<li><a href="#_display_remote_jobs">Display remote jobs</a></li>
<li><a href="#_cancel_remote_job">Cancel remote job</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_configuration_reference">Configuration reference</a>
<ul class="sectlevel2">
<li><a href="#_identity_providers">Identity Providers</a>
<ul class="sectlevel3">
<li><a href="#_file_identity_provider">File Identity Provider</a></li>
<li><a href="#_ldap_identity_provider">LDAP Identity Provider</a></li>
</ul>
</li>
<li><a href="#_repository">Repository</a></li>
<li><a href="#_database_2">Database</a></li>
<li><a href="#_index">Index</a></li>
<li><a href="#_rpc">RPC</a></li>
<li><a href="#_metrics">Metrics</a></li>
<li><a href="#_snomed_ct_2">SNOMED CT</a></li>
<li><a href="#_snomed_ct_component_identifier_configuration">SNOMED CT Component Identifier Configuration</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Snow Owl® is a terminology server and a collaborative terminology authoring platform. The authoring platform maintains terminology artifacts developed by a team and supported by business workflows that are driven by external task management systems like Bugzilla and JIRA. With its modular design, the server can maintain multiple terminologies where new terminologies can be plugged-in to the platform. The functionality of Snow Owl is exposed via a REST API.</p>
</div>
<div class="paragraph">
<p>Clients can easily access and query SNOMED CT, LOINC®, ATC, ICD-10, and dozens of additional terminologies via REST or Java APIs. Collaborative distributed authoring is also supported, including creating and maintaining your own local code systems, mapping between terminologies, and creating terminology subsets.</p>
</div>
<div class="paragraph">
<p>Snow Owl is maintained by B2i Healthcare.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section goes through the required installation steps to get a production ready Snow Owl up and running on your machines.</p>
</div>
<div class="sect2">
<h3 id="_installation_requirements">Installation requirements</h3>
<div class="sect3">
<h4 id="_client_side_requirements">Client-side requirements</h4>
<div class="sect4">
<h5 id="_hardware_requirements">Hardware requirements</h5>
<table class="tableblock frame-all grid-cols spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 GB free space</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Operations System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit Microsoft Windows 7, 8, 8.1, 10</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_server_side_requirements">Server-side requirements</h4>
<div class="sect4">
<h5 id="_hardware_requirements_2">Hardware requirements</h5>
<table class="tableblock frame-all grid-cols spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Core Server (eg. Dual Intel Xeon E5 2650 V3)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">96 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 x 256 GB Primary SSD Drive RAID 10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Gbps Dedicated Port</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_software_requirements">Software Requirements</h5>
<table class="tableblock frame-all grid-cols spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Supported Platforms</th>
<th class="tableblock halign-left valign-top">Supported Version(s)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Operating systems</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">CentOS (RHEL) 6.8 or Ubuntu 14.04 LTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We recommend starting with a minimal install and adding packages later, as required. B2i Healthcare only officially supports Snow Owl running on 64-bit derivatives of x86 hardware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Oracle JDK</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">1.8.0 update 121</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An installable archive can be downloaded from the
<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">JDK8 download page</a>. Select the
&#8220;Linux x64&#8221; edition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Database</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">MySQL</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">5.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology contents are persisted using a MySQL database, downloadable from <a href="http://dev.mysql.com/downloads/repo/yum/">MySQL&#8217;s yum repository</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">LDAP</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">OpenLDAP</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">2.4.x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication and authorization of browsers, terminology editors, reviewers and administrators is performed through an LDAP server.
Browsing and managing OpenLDAP instances can be done through the <strong>Apache Directory Studio</strong> application. We recommend  installing the latest release from the corresponding <a href="http://directory.apache.org/studio/">Download Versions</a> page on Apache&#8217;s website.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing">Installing</h3>
<div class="paragraph">
<p>In this section we&#8217;ll run you through installing Snow Owl in a production environment on a CentOS 6.8 machine with an external MySQL database and LDAP based authentication/authorization.</p>
</div>
<div class="sect3">
<h4 id="_operating_system">Operating system</h4>
<div class="paragraph">
<p>Install Red Hat Enterprise Linux or CentOS using the minimal ISO image. As hardware configurations and the
corresponding exact installation steps can be different from machine to machine, please refer to the
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/index.html">installation guide</a>
on Red Hat&#8217;s site for details (covers both distributions).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The text-based installer does not offer all options compared to the graphical one; you may have to connect a physical
monitor, or use the built-in KVM management capabilities of the server (if supported) to perform the installation from the
graphical environment. The installed system only needs an SSH connection for administration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When creating the partition layout, keep in mind that Snow Owl Server requires at least 50-150 GB of disk space when branched
terminology editing is used extensively.</p>
</div>
<div class="paragraph">
<p>After logging in to the installed system, update installed packages to the latest version and add EPEL as a package
repository for dependencies. For non-CentOS installations, please see the the
<a href="https://fedoraproject.org/wiki/EPEL#How_can_I_use_these_extra_packages.3F">usage instructions</a> on the EPEL wiki.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum update
# reboot
# yum install epel-release <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Works only if CentOS was installed</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a non-login user for Snow Owl Server to run as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># useradd -r -s /sbin/nologin snowowl</pre>
</div>
</div>
<div class="paragraph">
<p>For optimal indexing and searching performance, consult the "Important system configuration" section of
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.3/system-config.html">Elasticsearch: Reference Guide</a>.
In particular, the following settings are applicable to an installation of the terminology server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># sysctl settings, to be added to /etc/sysctl.conf or equivalent

vm.swappiness = 1
vm.max_map_count = 262144

# "noop" I/O scheduler, should be set in eg. /etc/rc.local for solid state disks:

echo noop &gt; /sys/block/sdX/queue/scheduler

# increase the maximum limit of available file descriptors and threads in /etc/security/limits.conf

*    soft    nofile 65536
*    hard    nofile 65536
*    soft    nproc  4096
*    hard    nproc  4096</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_network">Network</h4>
<div class="paragraph">
<p>Install <code>system-config-firewall-tui</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install dbus dbus-python system-config-firewall-tui
# reboot</pre>
</div>
</div>
<div class="paragraph">
<p>Using the text-based UI, enable these Trusted Services:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">SSH</dt>
<dd>
<p>For remote administration of the server</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Also open access to the following ports:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">8080/TCP</dt>
<dd>
<p>Used by Snow Owl Server&#8217;s REST API</p>
</dd>
<dt class="hdlist1">2036/TCP</dt>
<dd>
<p>Used by the Net4J binary protocol connecting Snow Owl clients to the server</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_database">Database</h4>
<div class="paragraph">
<p>An extensive installation guide for getting MySQL Community Edition from a yum repository is available at
<a href="http://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/index.html#repo-qg-yum-fresh-install">the MySQL Documentation Library</a>.
The required steps are summarized below.</p>
</div>
<div class="paragraph">
<p>Install MySQL&#8217;s yum repository with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install -y mysql57-community-release</pre>
</div>
</div>
<div class="paragraph">
<p>The repository for MySQL 5.7 should be enabled by default. Confirm by opening <code>/etc/yum.repos.d/mysql-community.repo</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum repolist enabled | grep mysql <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>5.7 should appear somewhere</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Install MySQL Community Server using yum (also run an update so packages get replaced with the community version):</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install -y mysql-community-server
# yum update -y</pre>
</div>
</div>
<div class="paragraph">
<p>Start the service and wait for first-time initialization to complete:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># chkconfig --list mysqld
# service mysqld start
Starting MySQL.                                            [  OK  ]</pre>
</div>
</div>
<div class="paragraph">
<p>After a few minutes, check if the database service is still running and enabled at startup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># service mysqld status
mysqld (pid  1757) is running...</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre># chkconfig mysqld on
# chkconfig --list mysqld
mysqld          0:off   1:off   2:on    3:on    4:on    5:on    6:off</pre>
</div>
</div>
<div class="paragraph">
<p>Get the temporary password and change it</p>
</div>
<div class="listingblock">
<div class="content">
<pre># grep 'temporary password' /var/log/mysqld.log
# mysql -uroot -p
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The entered new root password will be used later for configuration and administrative purposes; do not forget this password.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Edit <code>/etc/my.cnf</code> to adjust settings for the MySQL server. Recommended settings are shown below, but there are lots
of additional tunable settings to choose from depending on the hardware configuration used; please see
<a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html" class="bare">https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html</a> for the full set of system variables.</p>
</div>
<div class="listingblock">
<div class="title">/etc/my.cnf</div>
<div class="content">
<pre>#
# The following options will be read by MySQL client applications.
# Note that only client applications shipped by MySQL are guaranteed
# to read this section. If you want your own MySQL client program to
# honor these values, you need to specify it as an option during the
# MySQL client library initialization.
#
[client]
socket = /var/lib/mysql/mysql.sock

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
innodb_buffer_pool_size = 5G

# Note: "innodb_buffer_pool_size" above should be set in accordance with this value,
# so that at least 1G of memory can be assigned to each pool instance.
innodb_buffer_pool_instances = 5

# Size of each log file in a log group. You should set the combined size
# of log files to about 25%-100% of your buffer pool size to avoid
# unneeded buffer pool flush activity on log file overwrite. However,
# note that a larger logfile size will increase the time needed for the
# recovery process.
innodb_log_file_size = 1G

# Total number of files in the log group. A value of 2-3 is usually good
# enough.
innodb_log_files_in_group = 3

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
# basedir = .....
# datadir = .....
# port = .....
# server_id = .....
socket = /var/lib/mysql/mysql.sock

# Enable file-per-table tablespaces
innodb_file_per_table = 1

# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES

# Minimum word length to be indexed by the full text search index.
# You might wish to decrease it if you need to search for shorter words.
# Note that you need to rebuild your FULLTEXT index, after you have
# modified this value.
ft_min_word_len = 2

# The maximum size of a query packet the server can handle as well as
# maximum query size server can process (Important when working with
# large BLOBs).  enlarged dynamically, for each connection.
max_allowed_packet = 128M

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

collation-server=utf8_unicode_ci
character-set-server=utf8

lower_case_table_names=1
transaction-isolation=READ-COMMITTED

# Double the default number of maximum connections (150 + 1).
max_connections = 301

[mysqldump]
# Do not buffer the whole result set in memory before writing it to
# file. Required for dumping very large tables
quick
max_allowed_packet = 16M</pre>
</div>
</div>
<div class="paragraph">
<p>Restart the mysql service to make sure changes are picked up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># service mysqld restart
Stopping mysqld:                                           [  OK  ]
Starting mysqld:                                           [  OK  ]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_database">Configuring database</h4>
<div class="paragraph">
<p>Create a MySQL user for the Snow Owl Server by connecting to the DBMS via the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mysql -u root -p
Enter password: root_pwd <i class="conum" data-value="1"></i><b>(1)</b>

mysql&gt; CREATE USER 'snowowl'@'localhost' IDENTIFIED BY 'snowowl_pwd'; <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>root_pwd</code> with the password for the <code>root</code> user in MySQL</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Replace <code>snowowl_pwd</code> with a generated password for the <code>snowowl</code> user in MySQL</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Save the following shell script to an executable file to create databases and grant privileges for user <code>snowowl</code>:</p>
</div>
<div class="listingblock">
<div class="title">snowowl_create_db.sh</div>
<div class="content">
<pre>#!/usr/bin/env bash

#
# Copyright 2015-2017 B2i Healthcare Pte Ltd, http://b2i.sg
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

#
# This script creates all required databases and user for Snow Owl Server US edition.
#

DATABASES=( snomedStore )

MYSQL=`which mysql`
USER="root"
PASSWORD="root_pwd"

echo -e "\nStarting Snow Owl database setup procedure."

# Create user
${MYSQL} -u${USER} -p${PASSWORD} -e "CREATE USER 'snowowl'@'localhost' identified by 'snowowl';" &gt; /dev/null 2&gt;&amp;1
echo -e "\n\tCreated snowowl/mysql user."

# Create databases
echo -e "\n\tCreating Snow Owl databases:"
for i in "${DATABASES[@]}"
	do
		${MYSQL} -u${USER} -p${PASSWORD} -e "CREATE DATABASE \`${i}\` DEFAULT CHARSET 'utf8';" &gt; /dev/null 2&gt;&amp;1
		echo -e "\t\tCreated Snow Owl database ${i}."
		${MYSQL} -u${USER} -p${PASSWORD} -e "GRANT ALL PRIVILEGES ON \`${i}\`.* to 'snowowl'@'localhost';" &gt; /dev/null 2&gt;&amp;1
		echo -e "\t\tPrivileges granted on ${i} for snowowl user."
	done
echo -e "\tCreation of Snow Owl databases are now complete."

${MYSQL} -u${USER} -p${PASSWORD} -e "FLUSH PRIVILEGES;" &gt; /dev/null 2&gt;&amp;1
echo -e "\n\tGrant tables reloaded."

echo -e "\nSnow Owl database setup procedure has finished.\n"</pre>
</div>
</div>
<div class="paragraph">
<p>B2i provided MySQL dumps (if present) can be found in <code>/opt/snowowl-{edition}_{version}/resources/*.sql</code> files
after unpacking the installation archive. To load terminology data, save and execute the following script:</p>
</div>
<div class="listingblock">
<div class="title">snowowl_load_db.sh</div>
<div class="content">
<pre>#!/usr/bin/env bash

#
# Copyright 2013-2017 B2i Healthcare Pte Ltd, http://b2i.sg
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# Loads database content for Snow Owl from SQL dumps. Uses the name of the SQL
# file(s) specified as the target database for each file.
#
# Usage: ./snowowl_load_db [dbfile1] [dbfile2] ...

if [[ $# -eq 0 ]]; then
    echo "No SQL files were specified for loading. Exiting."
    exit 1
fi

MYSQL=$(which mysql)
BASENAME=$(which basename)
USER="snowowl"
PASSWORD="snowowl_pwd"

for DBFILE in "$@"
do
    DB="$(${BASENAME} "$DBFILE")"
    ${MYSQL} --batch -u${USER} -p${PASSWORD} "${DB%.sql}" &lt; "${DBFILE}"

    if [ $? -ne 0 ]; then
        echo "Loading from file ${DB} failed."
    else
        echo "Loading from file ${DB} finished successfully."
    fi
done

echo "All files processed."
exit 0</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java">Java</h4>
<div class="paragraph">
<p>Download the &#8220;Linux X64&#8221; edition, and install it with yum:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install jdk-8u121-linux-x64.rpm</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ldap">LDAP</h4>
<div class="paragraph">
<p>Install the latest (2.4.x) OpenLDAP with yum:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel</pre>
</div>
</div>
<div class="paragraph">
<p>Start the service, and enable it to run when system boots up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># systemctl start slapd.service
# systemctl enable slapd.service</pre>
</div>
</div>
<div class="paragraph">
<p>Next, run the <code>slappasswd</code> to create an LDAP root password. Please take note of this root password, the entire hashed value that is returned as output and starts {SSHA}, as you&#8217;ll use it throughout this article.
Afterwards, you can import the provided LDIF files via <code>ldapadd</code>/<code>ldapmodify</code> commands (Role and Permission schema).</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_ldap">Configuring LDAP</h4>
<div class="sect4">
<h5 id="_using_ldif_dumps">Using LDIF dumps</h5>
<div class="paragraph">
<p>B2i provided LDAP packages include the following content:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">permission_schema.ldif</dt>
<dd>
<p>LDAP schema to use for authorization (contains definitions for permissions)</p>
</dd>
<dt class="hdlist1">permissions.ldif</dt>
<dd>
<p>All available permissions in the system</p>
</dd>
<dt class="hdlist1">roles.ldif</dt>
<dd>
<p>All available roles in the system</p>
</dd>
<dt class="hdlist1">pm.ldif</dt>
<dd>
<p>Maps permissions to roles</p>
</dd>
<dt class="hdlist1">update.sh</dt>
<dd>
<p>An update script using <code>ldapmodify</code> and <code>ldapadd</code> commands against a running LDAP instance to update it
based on the files above</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optionally the assembly can contain two additional files:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">users.ldif</dt>
<dd>
<p>All users available in the system</p>
</dd>
<dt class="hdlist1">rm.ldif</dt>
<dd>
<p>Maps roles to users in the system</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The update script will also make use of these files if any of them exist.</p>
</div>
<div class="paragraph">
<p>Install the <code>openldap-clients</code> first to make use of the script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install openldap-clients</pre>
</div>
</div>
<div class="paragraph">
<p>Before updating the LDAP server, it is advised to shut down the service, and create a backup, so it can be restored easily if the script fails.</p>
</div>
<div class="paragraph">
<p>Restart the server, then create a new ldif-&lt;version&gt; folder and unzip the contents of the LDIF archive into
this folder. Finally, execute the script to update the contents of LDAP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># chmod u+x update.sh

# ./update.sh
Not specified LDAP URI parameter, using ldap://localhost:10389
adding new entry "cn=permission, ou=schema"
adding new entry "ou=attributeTypes, cn=permission, ou=schema"
...
modifying entry...</pre>
</div>
</div>
<div class="paragraph">
<p>In case an error occurs, the executed command and the error response will be displayed. Errors will also be logged
to a <code>{file_name}.errors</code> file, where the <code>{file_name}</code> refers to the file being processed (eg. <code>permissions.errors</code>).</p>
</div>
<div class="paragraph">
<p>When executing the script it is possible to get the following errors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ERR_250_ALREADY_EXISTS</code> (or any synonym of ALREADY_EXISTS)</p>
</li>
<li>
<p><code>ERR_54 Cannot add a value which is already present : snomed:compare:automap</code></p>
</li>
<li>
<p><code>ERR_335 Oid 2.25.128424792425578037463837247958458780603.1 for new schema entity is not unique</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is expected as most of the time the LDAP instance will already contain an existing definition of some entries and/or
schema entities. If you notice other errors (either during script execution or when using the LDAP), roll back your instance
to a previous state from a backup.</p>
</div>
<div class="paragraph">
<p>By default the update script will execute against the LDAP instance running locally at <code>ldap://localhost:10389</code>; if
you&#8217;d like to run the script against a remote LDAP server (or the LDAP is listening on a different port), you can do it by
specifying the LDAP_URI parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># ./update.sh ldap://&lt;host&gt;:&lt;port&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_using_apache_directory_studio">Using Apache Directory Studio</h5>
<div class="paragraph">
<p>Open Apache Directory Studio, create a new connection using the first button on the &#8220;Connections&#8221; toolbar:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_connection.png" alt="ldap new connection">
</div>
</div>
<div class="paragraph">
<p>Enter connection name, hostname, and port, then hit <code>Next &gt;</code> to go to the next page in the wizard:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_connection_page1.png" alt="ldap new connection page1">
</div>
</div>
<div class="paragraph">
<p>Set authentication method to <code>Simple Authentication</code>, enter Bind DN of your root user and its password. Click
<code>Check Authentication</code> to make sure the values are accepted, then dismiss the wizard with <code>Finish</code>:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_connection_page2.png" alt="ldap new connection page2">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_creating_a_new_user_using_apache_directory_studio">Creating a new user using Apache Directory Studio</h5>
<div class="paragraph">
<p>Go to LDAP Browser view, right click on the Domain component (DC) and add new entry via <code>New</code> &gt; <code>New entry</code>:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_context_menu.png" alt="ldap new user context menu">
</div>
</div>
<div class="paragraph">
<p>Create a new entry from scratch:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_new_entry.png" alt="ldap new user new entry">
</div>
</div>
<div class="paragraph">
<p>Select <code>inetOrgPreson</code> object from the wizard, add it as a selected object class:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_class.png" alt="ldap new user class">
</div>
</div>
<div class="paragraph">
<p>Configure the Relative Distinguished Name (RDN). Specify the common name (CN), surname (SN) and unique ID (uid):</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_rdn.png" alt="ldap new user rdn">
</div>
</div>
<div class="paragraph">
<p>Open the added node in an editor, right click in the editor and select <code>New Attribute</code>:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_new_attribute.png" alt="ldap new user new attribute">
</div>
</div>
<div class="paragraph">
<p>Select <code>userPassword</code> attribute, click <code>Finish</code>, then enter user password in the <code>Password Editor</code> dialog:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_password.png" alt="ldap new user password">
</div>
</div>
<div class="paragraph">
<p>Finally, add a <code>uniqueMember</code> attribute to the Administrator group.</p>
</div>
<div class="paragraph">
<p>Select the new user&#8217;s node in the tree, right click and select <code>Copy Entry / DN</code>:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_copy_entry.png" alt="ldap new user copy entry">
</div>
</div>
<div class="paragraph">
<p>Right click the <code>uniqueMember</code> attribute of the <code>Administrator</code> node, select <code>New Value</code> and paste the previously copied DN
of the new user as the value:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/ldap_new_user_add_to_group.png" alt="ldap new user add to group">
</div>
</div>
<div class="paragraph">
<p>The operation takes place after pressing Enter or removing the focus from the edited field.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_snow_owl_server">Snow Owl Server</h4>
<div class="paragraph">
<p>Unpack an official distribution archive into <code>/opt</code>, installing <code>unzip</code> first if not already present; change permissions
on the created folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install unzip
# unzip snowowl-{edition}-{version}-mysql.zip -d /opt
# chown -Rv snowowl:snowowl /opt/snowowl-{edition}_{version}</pre>
</div>
</div>
<div class="sect4">
<h5 id="_update_snow_owl_s_configuration">Update Snow Owl&#8217;s Configuration</h5>
<div class="paragraph">
<p>Update <code>snowowl_config.yml</code> to use LDAP as identity provider and set the MySQL password for <code>snowowl</code>, created earlier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>identity:
  providers:
    - ldap:
        uri: ldap://&lt;host&gt;:&lt;port&gt;
        baseDn: &lt;your-base-dn&gt;
        rootDn: &lt;DN of the ROOT user&gt;
        rootDnPassword: &lt;password of the ROOT user&gt;
        usePool: false

repository:
  ...

  database:
    ...
    username: snowowl
    password: snowowl <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Update MySQL username and password, if neccessary</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_memory_settings">Memory settings</h5>
<div class="paragraph">
<p>Heap size used by Snow Owl can be adjusted in <code>dmk.sh</code>; look for the following seciton:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>JAVA_OPTS="$JAVA_OPTS \
    -Xms12g \
    -Xmx12g \</pre>
</div>
</div>
<div class="paragraph">
<p><code>Xms</code> sets the minimum heap size, <code>Xmx</code> sets the maximum heap size used by the JVM.</p>
</div>
</div>
<div class="sect4">
<h5 id="_osgi_console">OSGi console</h5>
<div class="paragraph">
<p>The OSGi console can be accessed both via <code>ssh</code> and <code>telnet</code>. Configuration settings for remote access can be found in <code>osgi.console.properties</code>.
The default settings are:</p>
</div>
<div class="listingblock">
<div class="title">/opt/snowowl-{edition}_{version}/repository/ext/osgi.console.properties</div>
<div class="content">
<pre>telnet.enabled=true
telnet.port=2501
telnet.host=localhost
ssh.enabled=true
ssh.port=2502
ssh.host=localhost</pre>
</div>
</div>
<div class="paragraph">
<p>Further information on how to enable/disable the OSGi console can be found here:
<a href="http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch08.html" class="bare">http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch08.html</a>.</p>
</div>
<div class="paragraph">
<p>For opening a telnet connection to the server, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ telnet localhost 2501
Trying ::1...
Connected to localhost.
Escape character is '^]'.
osgi&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_logging">Logging</h5>
<div class="paragraph">
<p>Log files are stored under <code>./opt/snowowl-{edition}_{version}/serviceability</code> directory of the Snow Owl server.
The following log files are created:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>logs/log.log</code></dt>
<dd>
<p>Generic system trace log file, all log messages are written into this file. Logs files are created for each day
with the following file name format <code>log_%d{yyyy-MM-dd}</code>. Snow Owl will keep 90 days worth of history in this folder before starting to remove files.
This log serves two main purposes:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It provides global trace files that capture high-volume information regarding the Virgo’s internal events. The files
are intended for use by support personnel to diagnose runtime problems.</p>
</li>
<li>
<p>It provides application trace files that contain application-generated output. This includes output generated using
popular logging and tracing APIs including the OSGi LogService, as well as output generated by calls to <code>System.out</code> and
<code>System.err</code>. These files are intended for use by application developers and system administrators. An application is
defined as a scope so a single bundle will not get its own log file unless it is a Web application Bundle or is included
in a scoped plan or a par file.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1"><code>logs/access/*.log</code></dt>
<dd>
<p>Web container access log files in the same format as those created by standard web servers. The log
files are prefixed with the string <code>localhost_access_log</code>, have a suffix of <code>.txt</code>, use a standard format for identifying
what should be logged, and do not include DNS lookups of the IP address of the remote host.</p>
</dd>
<dt class="hdlist1"><code>eventlogs/eventlog.log</code></dt>
<dd>
<p>The <code>EVENT_LOG_FILE</code> appender logs only important events and thus the volume of information is
lower.</p>
</dd>
<dt class="hdlist1"><code>logs/snowowl/snowowl_user_audit.log</code></dt>
<dd>
<p>Events with business significance will be logged in this file.</p>
</dd>
<dt class="hdlist1"><code>logs/snowowl/snowowl_user_access.log</code></dt>
<dd>
<p>User access events are logged in this log file. Both authorized and unauthorized
access is logged.</p>
</dd>
<dt class="hdlist1"><code>logs/snowowl/snowowl_import.log</code></dt>
<dd>
<p>Import processes log into this file detailed information about import.</p>
</dd>
<dt class="hdlist1"><code>logs/snowowl/snowowl_export.log</code></dt>
<dd>
<p>Export processes log into this file detailed information about export.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Detailed information on the configuration on the logging configuration can be found here:
<a href="http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch11.html" class="bare">http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch11.html</a>.</p>
</div>
<div class="paragraph">
<p>Currently, default logging appenders for the log targets above look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;appender name="LOG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
	&lt;file&gt;serviceability/logs/log.log&lt;/file&gt;
	&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
		&lt;fileNamePattern&gt;serviceability/logs/log_%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
		&lt;!-- keep 90 days' worth of history --&gt;
  		&lt;maxHistory&gt;90&lt;/maxHistory&gt;
	&lt;/rollingPolicy&gt;
	&lt;filter class="ch.qos.logback.core.filter.EvaluatorFilter"&gt;
		&lt;evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator"&gt;
			&lt;marker&gt;SNOW_OWL_USER_ACCESS&lt;/marker&gt;
		&lt;/evaluator&gt;
		&lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt;
		&lt;onMatch&gt;DENY&lt;/onMatch&gt;
	&lt;/filter&gt;
	&lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
		&lt;Pattern&gt;[%d{yyyy-MM-dd HH:mm:ss.SSS}] %-5level %-28.28thread %-64.64logger{64} %X{medic.eventCode} %msg %ex%n&lt;/Pattern&gt;
	&lt;/encoder&gt;
&lt;/appender&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In this setting, the administrator can set the location of the log file, the maximum size of the log file and the
total number of files rolling over. Documentation on the logging configuration settings can be found here: <a href="http://logback.qos.ch" class="bare">http://logback.qos.ch</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_web_server_configuration">Web Server Configuration</h5>
<div class="paragraph">
<p>Snow Owl Server uses Tomcat as its built-in web server for administrative and RESTful services. The configuration
settings for the web server can be found in <code>tomcat-server.xml</code>. Detailed information on configuring the different
elements can be found here: <a href="http://tomcat.apache.org/tomcat-7.0-doc/config/index.html" class="bare">http://tomcat.apache.org/tomcat-7.0-doc/config/index.html</a>. The most important settings
are the port numbers for HTTP and HTTPS protocols:</p>
</div>
<div class="listingblock">
<div class="title">/opt/snowowl-{edition}_{version}/configuration/tomcat-server.xml</div>
<div class="content">
<pre>&lt;Service name="Catalina"&gt;
   &lt;Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
              redirectPort="8443" /&gt;
   &lt;Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
              maxThreads="150" scheme="https" secure="true"
              clientAuth="false" sslProtocol="TLS"
              keystoreFile="configuration/keystore"
              keystorePass="changeit"/&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_web_server_administrative_console_application">Web Server Administrative Console application</h5>
<div class="paragraph">
<p>The Admin Console is a web application for managing the Virgo Server instance powering Snow Owl Server. The default
location of the admin console is at <a href="http://localhost:8080/admin" class="bare">http://localhost:8080/admin</a>.</p>
</div>
<div class="paragraph">
<p>The Admin Console is a password-protected page; to configure users allowed to access the Admin Console, change settings
in file <code>org.eclipse.virgo.kernel.users.properties</code>. The username-password pair configured by default is <code>user=admin, pwd=adminpwd</code>:</p>
</div>
<div class="listingblock">
<div class="title">/opt/snowowl-{edition}_{version}/configuration/org.eclipse.virgo.kernel.users.properties</div>
<div class="content">
<pre> ##################
 # User definitions
 ##################
 user.admin=adminpwd

 ##################
 # Role definitions
 ##################
 role.admin=admin</pre>
</div>
</div>
<div class="paragraph">
<p>More information on administrative user access control can be found on the following pages:
<a href="http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch09.html" class="bare">http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch09.html</a> and
<a href="http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch13s06.html#configuring-authentication" class="bare">http://www.eclipse.org/virgo/documentation/virgo-documentation-3.6.4.RELEASE/docs/virgo-user-guide/html/ch13s06.html#configuring-authentication</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_virgo_documentation">Virgo documentation</h5>
<div class="paragraph">
<p>Complete documentation of the Virgo OSGi server can be found here: <a href="http://www.eclipse.org/virgo/documentation" class="bare">http://www.eclipse.org/virgo/documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration">Administration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers administrative and maintenance tasks in Snow Owl Server.</p>
</div>
<div class="sect2">
<h3 id="_startup_and_shutdown">Startup and shutdown</h3>
<div class="paragraph">
<p>Scripts for starting and stopping a Snow Owl Server instance are located in <code>/opt/snowowl-{edition}_{version}/bin/*.sh</code>
files. Change the active user to <code>snowowl</code> when starting the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># su snowowl -s /bin/bash -c "nohup bin/startup.sh &gt; /dev/null" &amp;
[1] 12473
nohup: ignoring input and redirecting stderr to stdout

# jobs
[1]+  Running    su snowowl -s /bin/bash -c "nohup bin/startup.sh &gt; /dev/null" &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that startup will continue in the background and the server stays running even if the user disconnects from
the server.</p>
</div>
<div class="paragraph">
<p>You can follow the startup sequence by inspecting <code>serviceability/logs/log.log</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># tail -f serviceability/logs/log.log
...
[2017-01-24 02:50:12.753] INFO  start-signalling-2 WE0001I Started web bundle [...]
[2017-01-24 02:50:12.756] INFO  start-signalling-2 DE0005I Started bundle [...]
[2017-01-24 02:50:12.756] INFO  start-signalling-2 Thread context class loader [...]
[2017-01-24 02:50:12.757] INFO  start-signalling-2 DE0005I Started plan 'osgi_server.plan' version '1.0.0'.</pre>
</div>
</div>
<div class="paragraph">
<p>Snow Owl Server finishes the startup procedure after displaying the lines from above. You can verify that everything is working properly by
checking the server&#8217;s version, the available databases and their health states via the OSGi console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum install telnet <i class="conum" data-value="1"></i><b>(1)</b>

# telnet localhost 2501
Trying ::1...
Connected to localhost.
Escape character is '^]'.

osgi&gt; snowowl --version <i class="conum" data-value="2"></i><b>(2)</b>
5.8.6

osgi&gt; snowowl repositories
----------------------------------------------------
|id              |health          |diagnosis       |
----------------------------------------------------
|snomedStore     |GREEN           |-               |
----------------------------------------------------

osgi&gt; disconnect
Disconnect from console? (y/n; default=y) y
Connection closed by foreign host.</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Install the client first (if not already present)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Should always print the currently running server&#8217;s version</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The server can be stopped cleanly by running <code>bin/shutdown.sh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># cd /opt/snowowl-{edition}_{version}
# bin/shutdown.sh</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_importing_snomed_ct_content">Importing SNOMED CT content</h3>
<div class="paragraph">
<p>To import a <code>SnomedCT_Release_XXX_xxxxxxxx.zip</code> release archive, the file must be present in the Snow Owl Server host file system, which we will refer to as {import_archive}.</p>
</div>
<div class="sect3">
<h4 id="_starting_the_import">Starting the import</h4>
<div class="paragraph">
<p>Use the following OSGi command to start the import process:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; sctimport rf2_release -t &lt;type&gt; -b &lt;branch&gt; -v /path/to/{import_archive} /path/to/{release_descriptor_file}</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-t &lt;type&gt;</dt>
<dd>
<p>One of <code>FULL</code>, <code>SNAPSHOT</code> or <code>DELTA</code>, depending on the import type the administrator wants to use. The parameter is case-insensitive.</p>
</dd>
<dt class="hdlist1">-b &lt;branch&gt;</dt>
<dd>
<p>The existing branch to import the content onto. In case of extension import, an effective time from the base SNOMED CT release (e.g. 2016-01-31). If omitted <code>MAIN</code> will be used.</p>
</dd>
<dt class="hdlist1">-v</dt>
<dd>
<p>Creates versions for each effective time found in the release archive. If omitted no versions will be created.</p>
</dd>
<dt class="hdlist1">/path/to/{import_archive}</dt>
<dd>
<p>Specifies the release archive to import. Must be a <code>.zip</code> file with a supported internal structure, such as the release archive of the International Release.</p>
</dd>
<dt class="hdlist1">/path/to/{release_descriptor_file}</dt>
<dd>
<p>The path to the release descriptor <code>.json</code> file.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_release_decriptor_file">Release decriptor file</h5>
<div class="paragraph">
<p>The release descriptor <code>.json</code> file could contain the following attributes as key/value pairs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Descriptive name of the code system.</p>
</dd>
<dt class="hdlist1">Short name</dt>
<dd>
<p>Short name of the code system. Must <strong>not</strong> contain any whitespaces, must be <strong>unique</strong> among the other code systems already present in Snow Owl.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <code>terminologyregistry listall</code> OSGi command to list all existing code systems.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Language</dt>
<dd>
<p>Three letter language code of the code system.</p>
</dd>
<dt class="hdlist1">Code system OID</dt>
<dd>
<p>The OID of the code system.</p>
</dd>
<dt class="hdlist1">Extension of</dt>
<dd>
<p>The short name of the base code system / release this SNOMED CT release depends on.</p>
</dd>
<dt class="hdlist1">Maintaining organization link</dt>
<dd>
<p>Maintaining organization link.</p>
</dd>
<dt class="hdlist1">Release type</dt>
<dd>
<p>The type of the release. Either <code>INTERNATIONAL</code> or <code>EXTENSION</code>.</p>
</dd>
<dt class="hdlist1">Citation</dt>
<dd>
<p>Citation.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="sect4">
<h5 id="_international_import">International import</h5>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; sctimport rf2_release -t FULL /path/to/{international_import_archive} /path/to/snomed_ct_international.json</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>snomed_ct_international.json</code> looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Systematized Nomenclature of Medicine Clinical Terms International Version</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">shortName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SNOMEDCT</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ENG</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">codeSystemOID</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2.16.840.1.113883.6.96</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">maintainingOrganizationLink</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.ihtsdo.org</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">citation</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SNOMED CT contributes to the improvement of patient care by underpinning the development of Electronic Health Records that record clinical information in ways that enable meaning-based retrieval. This provides effective access to information required for decision support and consistent reporting and analysis. Patients benefit from the use of SNOMED CT because it improves the recording of EHR information and facilitates better communication, leading to improvements in the quality of care.</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_extension_import">Extension import</h5>
<div class="paragraph">
<p>An extension import based on the 2015-01-31 version of the international release:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; sctimport rf2_release -t FULL -b 2015-01-31 -v /path/to/{extension_import_archive} /path/to/snomed_ct_extension.json</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>snomed_ct_extension.json</code> looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SNOMED CT Special Extension</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">shortName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SNOMEDCT-SE</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ENG</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">codeSystemOID</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2.16.840.1.113883.6.96.2</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">extensionOf</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SNOMEDCT</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">maintainingOrganizationLink</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.snomed-special-extension.org</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">citation</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Long citation about the details of SNOMED CT special extension</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While the import is running, feedback might be delayed on the OSGi console. Log output can be observed throughout the import session in the file <code>serviceability/logs/log.log</code>. The import may take several hours depending on your hardware and JVM configuration.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_single_administrator_operations">Single administrator operations</h3>
<div class="paragraph">
<p>Import and export processes are dedicated single administrator operations. As these operations are long-running, administrators
need to ensure that during these processes no other users should be connected to the system. The following steps describe how to
disconnect all clients from the server and how to ensure that no one else, but the administrator is the only connected user while
performing any import/export operations.</p>
</div>
<div class="sect3">
<h4 id="_steps_to_perform_single_admin_operations">Steps to perform single admin operations</h4>
<div class="paragraph">
<p>Checking the connected users from the OSGi server console, to list all connected users one should perform the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session users
User: info@b2international.com ,session id: 9</pre>
</div>
</div>
<div class="paragraph">
<p>Before starting to gracefully disconnect users, the administrator should disable non-administrator user logins to the server.
To check the login status on the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login status
Non-administrative logins are currently enabled.</pre>
</div>
</div>
<div class="paragraph">
<p>As the response states above, there is no login restrictions applied. To restrict non-administrator logging, one should execute
the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login disabled
Disabled non-administrative logins.</pre>
</div>
</div>
<div class="paragraph">
<p>Now any users with insufficient privileges (in other words; users without 'Administrator' role) will be refused by the server when
trying to connect.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
None of the currently connected users will be disconnected. Connected users have to be disconnected by the administrator via
the OSGi console as described later.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The administrator can send an informational message from the OSGi console to connected clients, so users can be informed about the
upcoming maintenance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session message ALL Server is going down in 10 minutes due to a SNOMED CT publication process. Please commit all your unsaved changes.
Message sent to info@b2international.com</pre>
</div>
</div>
<div class="paragraph">
<p>To disconnect all currently connected users:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session disconnect ALL
User: info@b2international.com ,session id: 9 was disconnected.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this case, all clients, including the administrator will be logged out from the server, but the administrator may reconnect to the
server as only non-administrative users are locked out.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After disabling non-administrator user login, notifying and disconnecting users, double-check of the current status and the connected
users at the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login status
Non-administrative logins are currently disabled.</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session users
osgi&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is now safe to perform any single administrator operations, such as an RF2 import. When finished, enable non-administrative connections again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login enabled
Enabled non-administrative logins.</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_impersonating_users">Impersonating users</h4>
<div class="paragraph">
<p>Snow Owl Server will ask for a user identifier for server-side import operations in the following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SNOMED CT RF2 import</p>
</li>
<li>
<p>SNOMED CT MRCM import</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The user identifier will be used for associating commits to the terminology repository with a user in the commit information view.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_taking_backups">Taking backups</h3>
<div class="sect3">
<h4 id="__hot_backups">"Hot" backups</h4>
<div class="paragraph">
<p>The example shell script <code>snowowl_hot_backup_mysql.sh</code> exercises all functionality mentioned above, and produces a .zip
archive containing database dumps and copies of index folders in the directory it is started from. Please update the variable
<code>SNOW_OWL_SERVER_HOME</code> so that it points to the installation folder of Snow Owl Server before running the script.</p>
</div>
<div class="paragraph">
<p>The return value is 0 for successful backups, and 1 if an error occurs while backing up content from the server. The script
produces timestamped diagnostic output on its standard output; error messages are directed to the standard error output.</p>
</div>
<div class="paragraph">
<p>To create backups regularly, add a dedicated non-login user for backups as root:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># useradd -r -M -d / -s /sbin/nologin -c "Snow Owl Backup" snowowl-backup</pre>
</div>
</div>
<div class="paragraph">
<p>Create and/or update access privileges of the backup destination, log output, and the location of the singleton instance lock file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mkdir -pv /storage/backups /var/log/snowowl-backup /var/run/snowowl-backup
mkdir: created directory `/storage/backups'
mkdir: created directory `/var/log/snowowl-backup'
mkdir: created directory `/var/run/snowowl-backup'

# chown -v root:snowowl-backup /storage/backups /var/log/snowowl-backup /var/run/snowowl-backup
changed ownership of `/storage/backups' to root:snowowl-backup
changed ownership of `/var/log/snowowl-backup' to root:snowowl-backup
changed ownership of `/var/run/snowowl-backup' to root:snowowl-backup

# chmod -v 775 /storage/backups /var/log/snowowl-backup /var/run/snowowl-backup
mode of `/storage/backups' changed to 0775 (rwxrwxr-x)
mode of `/var/log/snowowl-backup' changed to 0775 (rwxrwxr-x)
mode of `/var/run/snowowl-backup' changed to 0775 (rwxrwxr-x)</pre>
</div>
</div>
<div class="paragraph">
<p>Save the backup script in an accessible place, set the owner to snowowl-backup, and make it executable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># chown -v snowowl-backup: /storage/backups/snowowl_full_backup_mysql.sh
changed ownership of `/storage/backups/snowowl_full_backup_mysql.sh' to snowowl-backup:snowowl-backup

# chmod -v 744 /storage/backups/snowowl_full_backup_mysql.sh
mode of `/storage/backups/snowowl_full_backup_mysql.sh' changed to 0744 (rwxr--r--)</pre>
</div>
</div>
<div class="paragraph">
<p>Add the script to the backup user&#8217;s crontab (the example runs the script at 4 AM, and outputs log entries to logfiles
with a year-month-date suffix in /var/log/snowowl-backup):</p>
</div>
<div class="listingblock">
<div class="content">
<pre># EDITOR=nano crontab -e -u snowowl-backups

&lt;nano opens; add the content below to the opened file, save, and exit the editor&gt;

# MAILTO="local-user"
#
# Minute - Hour - Day of month - Month - Day of week - Command
0 4 * * * cd /storage/backups &amp;&amp; ( ./snowowl_full_backup_mysql.sh &gt;&gt; /var/log/snowowl-backup/log-`date +\%Y\%m\%d` 2&gt;&amp;1 )</pre>
</div>
</div>
<div class="paragraph">
<p>(If the standard error output is not redirected with the "2&gt;&amp;1" part of the command, errors will be captured by cron
and mailed to the snowowl-backup user&#8217;s mailbox. The destination can be changed by uncommenting the MAILTO parameter
and setting it to a different address.)</p>
</div>
</div>
<div class="sect3">
<h4 id="__cold_backups">"Cold" backups</h4>
<div class="paragraph">
<p>When the server is shut down, the above mentioned REST service for enumerating store content and getting exclusive
write locks for the repositories is not available, so a separate script, <code>snowowl_cold_backup_mysql.sh</code> is being provided for this case.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_and_access_control">User and Access control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Snow Owl supports role based access control by organizing <strong>Users</strong> into a set of <strong>Roles</strong>.
A <strong>Role</strong> is essentially a group that has a set of assigned <strong>Permissions</strong>.
<strong>Permissions</strong> allow users to do certain things in the system.
If <strong>User</strong> <em>A</em> belongs to a <strong>Role</strong> called <em>R</em> that has a permission called <em>P</em>, then user <em>A</em> can perform operations that require permission <em>P</em>.</p>
</div>
<div class="sect2">
<h3 id="_permissions">Permissions</h3>
<div class="ulist">
<ul>
<li>
<p>browse:* - to be able to browse/search/view terminology content</p>
</li>
<li>
<p>edit:* - to be able to create/modify/delete terminology content</p>
</li>
<li>
<p>import:* - to be able to modify terminology content via import operation</p>
</li>
<li>
<p>export:* - to be able to export terminology content into various formats</p>
</li>
<li>
<p>version:* - to be able to create a terminology version</p>
</li>
<li>
<p>promote:* - to be able to merge task changes to the terminology working branch (aka MAIN)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_default_roles">Default Roles</h3>
<div class="paragraph">
<p>Snow Owl comes with a set of predefined <strong>Roles</strong> that can be used to organize your users in order to restrict them from performing something they should not be allowed to do.
Each role has a default set of assigned permissions</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browser - browse, export</p>
</li>
<li>
<p>Editor - browse, edit, import, export</p>
</li>
<li>
<p>Reviewer - browse, export, promote</p>
</li>
<li>
<p>Administrator - browse, edit, import, export, promote, version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Administrator</em> role is a special <strong>Role</strong> that is required by Snow Owl. It must be kept as is in order to run Snow Owl without issues.
Snow Owl uses this role to identify users who can version and release content of a terminology and edit anything on the terminology&#8217;s working branch (aka MAIN or equivalent).</p>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_access_control">Customizing access control</h3>
<div class="paragraph">
<p>Snow Owl must be configured to use <em>LDAP</em> as external source of user and access control information in order to customize it to your needs.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re using an ApacheDS LDAP service (as mentioned in the install guide earlier than 5.10.11), then please switch to the more secure and robust OpenLDAP service.
To install OpenLDAP please see the provided <code>ldap/docker-compose.yml</code> file in the distribution archive
or this Dockerfile (<a href="https://github.com/osixia/docker-openldap/blob/stable/image/Dockerfile" class="bare">https://github.com/osixia/docker-openldap/blob/stable/image/Dockerfile</a>) if you would like to install OpenLDAP manually. Also you can install OpenLDAP manually by following a guide matching your deployment environment (CentOS 7.x/Ubuntu 14.04/Other).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you have a running OpenLDAP service you can connect to it with the ApacheDS Studio you&#8217;ve used for the ApacheDS LDAP service.</p>
</div>
<div class="sect3">
<h4 id="_customize_schema">Customize schema</h4>
<div class="paragraph">
<p>Snow Owl requires a permission schema object to be present in the LDAP schema in order to represent permissions in LDAP:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the running OpenLDAP service via an LDAP client using the <code>cn=admin,cn=config</code> user and <code>config</code> password.</p>
</li>
<li>
<p>Open the <code>permission_schema.ldif</code> in the ApacheDS Studio via Open File&#8230;&#8203; menu</p>
</li>
<li>
<p>Execute the LDIF file against the OpenLDAP service</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_import_default_configuration">Import default configuration</h4>
<div class="paragraph">
<p>After successfully modifying the schema we can import Snow Owl&#8217;s permissions and the default roles.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the running OpenLDAP service via an LDAP client using the <code>cn=admin,dc=snowowl,dc=b2international,dc=com</code> user and configured admin password.</p>
</li>
<li>
<p>Open and execute the following LDIF files:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>permissions.ldif</code> - contains permissions recognized by Snow Owl</p>
</li>
<li>
<p><code>roles.ldif</code> - contains default roles</p>
</li>
<li>
<p><code>pm.ldif</code> - contains default permission &#8594; role mapping</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_add_new_user">Add new user</h4>
<div class="paragraph">
<p>See Section <code>Creating a new user from Directory Studio</code> in Snow Owl installation guide on how to add new users to the LDAP repository.</p>
</div>
</div>
<div class="sect3">
<h4 id="_modify_access_control">Modify access control</h4>
<div class="paragraph">
<p>To customize access control, first connect to your running OpenLDAP service using the <code>cn=admin,dc=snowowl,dc=b2international,dc=com</code> user and configured admin password.</p>
</div>
<div class="sect4">
<h5 id="_create_new_role">Create new Role</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new child entry under <code>dc=snowowl,dc=b2international,dc=com</code> using the <em>Administrator</em> Role as template</p>
</li>
<li>
<p>Change the name of your new <strong>Role</strong></p>
</li>
<li>
<p>Finish the wizard</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_modify_roles">Modify Roles</h5>
<div class="paragraph">
<p>Select the <strong>Role</strong> you would like to edit</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can edit name by double clicking on it then changing it</p>
</li>
<li>
<p>You can add new permissions by <strong>Right Click &#8594; New Attribute</strong></p>
</li>
<li>
<p>You can remove permissions by <strong>Right Click &#8594; Delete Value</strong> on a permissionId row</p>
</li>
<li>
<p>You can assign users via <strong>Right Click on uniqueMember &#8594; New Value</strong></p>
</li>
<li>
<p>You can unassign users via <strong>Right Click on a uniqueMember row &#8594; Delete Value</strong></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_console_command_reference">Console command reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section lists commands available to the system administrator when connecting to the OSGi console of a running
Snow Owl Server instance using telnet or SSH. Instructions for setting up the console can be found in the section
titled &#8220;OSGi console&#8221; of the Configuration guide.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on log configuration, the output shown following user-entered commands in the usage examples might only
appear in the service log, located at <code>serviceability/logs/log.log</code> in the Snow Owl Server installation folder, or the
export/import logs in folder <code>serviceability/logs/snowowl</code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_general">General</h3>
<div class="paragraph">
<p>To get a quick overview of all available commands, type <code>help</code> into the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; help
---CDO commands---
       cdo list - list all active repositories
       cdo start - start repositories from a config file
       cdo stop - stop a repository
...
service - list all services in the service registry
  scope: vsh
  parameters:
     String   operation (list)

service - examine a service in the service registry
  scope: vsh
  parameters:
     String   operation (examine)
     long     service id

shutdown - shut down the kernel
  scope: vsh</pre>
</div>
</div>
<div class="paragraph">
<p>The displayed list of commands are a mixture of application-specific and framework-specific operations; the following
categories provide functionality related to Snow Owl Server itself:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Diagnostic and Maintenance commands&#8201;&#8212;&#8201;<code>snowowl</code></p>
</li>
<li>
<p>Terminology Registry commands&#8201;&#8212;&#8201;<code>terminologyregistry</code></p>
</li>
<li>
<p>Session Management commands&#8201;&#8212;&#8201;<code>session</code></p>
</li>
<li>
<p>Scripting commands&#8201;&#8212;&#8201;<code>script</code></p>
</li>
<li>
<p>SNOMED CT Importer commands&#8201;&#8212;&#8201;<code>sctimport</code></p>
</li>
<li>
<p>SNOMED CT OWL Ontology commands&#8201;&#8212;&#8201;<code>ontology</code></p>
</li>
<li>
<p>MRCM commands&#8201;&#8212;&#8201;<code>mrcm</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To narrow the command list down to a certain category, type the category name given above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>---Snow Owl commands---
	snowowl --version - returns the current version
	snowowl dbcreateindex [nsUri] - creates the CDO_CREATED index on the proper DB tables for all classes contained by a package identified by its unique namespace URI.
	snowowl listrepositories - prints all the repositories in the system.
	snowowl listbranches [repository] [branchPath] - prints all the child branches of the specified branch path in the system for a repository. Branch path is MAIN by default and has to be full path (e.g. MAIN/PROJECT/TASK)
	snowowl reindex [repositoryId] [failedCommitTimestamp] - reindexes the content for the given repository ID from the given failed commit timestamp (optional, default timestamp is 1 which means no failed commit).
	snowowl optimize [repositoryId] [maxSegments] - optimizes the underlying index for the repository to have the supplied maximum number of segments (default number is 1)
	snowowl purge [repositoryId] [branchPath] [ALL|LATEST|HISTORY] - optimizes the underlying index by deleting unnecessary documents from the given branch using the given purge strategy (default strategy is LATEST)
	snowowl repositories [repositoryId] - prints all currently available repositories and their health statuses</pre>
</div>
</div>
<div class="sect3">
<h4 id="_disconnecting_from_the_console">Disconnecting from the console</h4>
<div class="paragraph">
<p>To leave the console (and keep the server running), type <code>disconnect</code>, then confirm the operation by pressing Enter.
Alternatively, you can type "y" to confirm, or "n" to back out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; disconnect
Disconnect from console? (y/n; default=y) y

Connection closed by foreign host.</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_available_commands">Available commands</h3>
<div class="sect3">
<h4 id="_scripting">Scripting</h4>
<div class="sect4">
<h5 id="_execute_groovy_script">Execute Groovy script</h5>
<div class="paragraph">
<p><code>script run</code> parses and executes the specified Groovy script. Services will be provided by the running server instance,
similarly to the Groovy editing environment within the Snow Owl client.</p>
</div>
<div class="paragraph">
<p>Make sure to inspect the server log for any issues, as they might not be printed to the console output depending on the
log configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; script run /home/user/IndexExample.groovy

[Systemic blood pressure]
Number of results for 'hyp' query term: 3566
[Hypertensive disorder, Hyperlipidaemia, Asthma]
Number of results for 'hyp' AND 'blood cell' query term: 100
Autologous peripheral blood stem cell transplant
White blood cell disorder
...
Red blood cell count, manual, peritoneal fluid
Red blood cell folate borderline high
ID          Label
425983008   Autologous peripheral blood stem cell transplant
54097007    White blood cell disorder
...
442218004   Red blood cell folate borderline high</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_machine_readable_concept_model">Machine-Readable Concept Model</h4>
<div class="sect4">
<h5 id="_import_mrcm_rules_from_xmi_file">Import MRCM rules from XMI file</h5>
<div class="paragraph">
<p><code>mrcm import</code> reads and applies rules from the specified source file. Note that as with regular editing of MRCM rules,
only SNOMED CT concept and reference set editors opened after the import will display their output with the changes
considered.</p>
</div>
<div class="paragraph">
<p>This command also requires the specification of a user identifier, which will be presented as the importing user in
the commit information view.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; mrcm import /path/to/mrcm_20131212143528517.xmi
Impersonate operation as: info@b2international.com

... - Importing MRCM rules...
...
... - Persisting changes...
... - Changes have been successfully persisted.
... - Branch: MAIN Event: SNOMED CT Changes: changed concepts: [123037004:Body structure], ...
...
... - MRCM rule import successfully finished.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_export_mrcm_rules_to_an_xmi_file">Export MRCM rules to an XMI file</h5>
<div class="paragraph">
<p><code>mrcm export</code> creates a file named <code>mrcm_{timestamp}.xmi</code> in the directory given by the administrator. The command
requires a user identifier which will be recorded in the user audit log.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; mrcm export /path/to/export/folder
Impersonate operation as: info@b2international.com

... - Exporting MRCM rules...
...
... - MRCM rule export successfully finished.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_registry">Terminology registry</h4>
<div class="sect4">
<h5 id="_list_all_imported_terminologies">List all imported terminologies</h5>
<div class="paragraph">
<p><code>terminologyregistry listall</code> displays information about terminologies and terminology extensions imported into the running server instance,
including individual local code systems.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; terminologyregistry listall

Name: SNOMED CT
Short name: SNOMEDCT
Code System OID: 2.16.840.1.113883.6.96
Maintaining organization link: http://www.snomed.org
Language: ENG
Last version: 0
Current branch path: MAIN</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_snomed_ct_owl_ontology_reasoner">SNOMED CT OWL Ontology (reasoner)</h4>
<div class="sect4">
<h5 id="_display_available_reasoners">Display available reasoners</h5>
<div class="paragraph">
<p>To list the available reasoners and the preferred one (marked with an <code>*</code> symbol) one has to perform the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; ontology list

   0 None [version: 4.1.0] (org.protege.editor.owl.NoOpReasoner)
   1 ELK 0.3.2 [version: 0.3.2] (org.semanticweb.elk.elk.reasoner.factory)
 * 2 MORe A (0.1.3) [version: 0.1.3] (org.semanticweb.more.MORe.reasoner.factory)
   3 MORe B (0.1.3) [version: 0.1.3] (org.semanticweb.more.MOReRLrew.reasoner.factory)
   4 FaCT++ [version: 1.6.2] (uk.ac.manchester.cs.owl.factplusplus.factplusplus-factory)</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_change_the_active_reasoner">Change the active reasoner</h5>
<div class="paragraph">
<p>To change the preferred reasoner on the server (in our case from <code>MORe A</code> to <code>FaCT++</code>), use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; ontology select 4

   0 None [version: 4.1.0] (org.protege.editor.owl.NoOpReasoner)
   1 ELK 0.3.2 [version: 0.3.2] (org.semanticweb.elk.elk.reasoner.factory)
   2 MORe A (0.1.3) [version: 0.1.3] (org.semanticweb.more.MORe.reasoner.factory)
   3 MORe B (0.1.3) [version: 0.1.3] (org.semanticweb.more.MOReRLrew.reasoner.factory)
 * 4 FaCT++ [version: 1.6.2] (uk.ac.manchester.cs.owl.factplusplus.factplusplus-factory)</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this setting does not affect ongoing computations if they were started using a different reasoner.</p>
</div>
</div>
<div class="sect4">
<h5 id="_checking_status_of_available_reasoners">Checking status of available reasoners</h5>
<div class="paragraph">
<p>The command checks the presence and availability of all reasoners available on the server side. In case of the
response below, all reasoners are available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; ontology check
All reasoner instances are available and ready for use.</pre>
</div>
</div>
<div class="paragraph">
<p>Whenever any of the reasoners is not available, the output should contain the problematic reasoner identifier.
Please note that reasoner identifiers may vary; also, if more than one reasoner reports a problem, a list of
reasoner identifiers will be printed to the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; ontology check
Couldn't initialize reasoner factory for ID 'unique.id.of.the.reasoner'.</pre>
</div>
</div>
<div class="paragraph">
<p>For getting the original cause of the reasoner availability issue, one could dump the exception by appending
the <code>-d</code> flag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; ontology check -d
Couldn't initialize reasoner factory for ID 'unique.id.of.the.reasoner'.

com.b2international.snowowl.snomed.reasoner.exceptions.ReasonerException: Couldn't initialize reasoner factory for ID 'unique.id.of.the.reasoner'.
    at com.b2international.snowowl.snomed.reasoner.server.preferences.ReasonerPreferencesService.createReasonerInfo(ReasonerPreferencesService.java:306)
    at com.b2international.snowowl.snomed.reasoner.server.preferences.ReasonerPreferencesService.checkAllAvailableReasoners(ReasonerPreferencesService.java:270)
    at com.b2international.snowowl.snomed.reasoner.server.console.SnomedOntologyCommandProvider$Command$3.execute(SnomedOntologyCommandProvider.java:65)
    at com.b2international.snowowl.snomed.reasoner.server.console.SnomedOntologyCommandProvider._ontology(SnomedOntologyCommandProvider.java:150)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:209)
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_snomed_ct">SNOMED CT</h4>
<div class="sect4">
<h5 id="_import_reference_sets_in_rf2_format_from_a_release_text_file">Import reference sets in RF2 format from a release text file</h5>
<div class="paragraph">
<p>Use <code>sctimport rf2_refset</code> to import one or more reference sets from an RF2 text file. All RF2 import modes (<code>FULL</code>,
<code>SNAPSHOT</code> and <code>DELTA</code>) are available; certain reference set members can be excluded from being imported based on
their reference set identifiers.</p>
</div>
<div class="paragraph">
<p>The following example imports a snapshot release file from the SNOMED CT International RF2 release, excluding two
reference sets by identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; sctimport rf2_refset /path/to/der2_Refset_SimpleSnapshot_INT_20130731.txt -t SNAPSHOT -x 447566000 447565001

[2013-12-12 17:10:47.987] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - SNOMED CT import started from RF2 release format.
[2013-12-12 17:10:47.987] User: web Event: SNOMED CT import started from RF2 release format.
Importing release files...: 0% [0ms]
[2013-12-12 17:10:47.988] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Validating release files...
[2013-12-12 17:10:47.988] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Validating RF2 release files.
[2013-12-12 17:10:47.988] User: web Event: Validating RF2 release files.
[2013-12-12 17:10:47.988] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Creating staging directory '...' for simple type reference set member validation.
Preparing simple type reference set members validation: 5% [96ms]
[2013-12-12 17:10:48.083] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Validating 'der2_Refset_SimpleSnapshot_INT_20130731.txt' release file.
[2013-12-12 17:10:48.083] User: web Event: Validating 'der2_Refset_SimpleSnapshot_INT_20130731.txt' release file.
Validating simple type reference set members...: 11% [868ms]
[2013-12-12 17:10:48.954] [OSGi Console] INFO  c.b.commons.db.JdbcUtils - Connected to database '...'.
Finishing simple type reference set members validation: 17% [3ms]
[2013-12-12 17:10:48.954] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Preparing simple type reference set member import
[2013-12-12 17:10:48.954] User: web Event: Preparing simple type reference set member import
[2013-12-12 17:10:48.954] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Creating staging directory '...' for simple type reference set member import.
[2013-12-12 17:10:48.954] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Creating staging directory '...' for simple type reference set member import.
[2013-12-12 17:10:48.954] User: web Event: Creating staging directory '...' for simple type reference set member import.
Preparing simple type reference set member import: 20% [1ms]
[2013-12-12 17:10:48.955] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Populating storage keys for simple type reference set member import.
[2013-12-12 17:10:48.955] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Populating storage keys for simple type reference set member import.
[2013-12-12 17:10:48.955] User: web Event: Populating storage keys for simple type reference set member import.
Preparing simple type reference set member import: 21% [2ms]
Preparing simple type reference set member import: 22% [595ms]
Preparing simple type reference set member import: 23% [8382ms]
[2013-12-12 17:10:58.002] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Collecting simple type reference set member import units
[2013-12-12 17:10:58.002] User: web Event: Collecting simple type reference set member import units
Collecting simple type reference set member import units: 24% [92ms]
...
[2013-12-12 17:10:58.148] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Processing simple type reference set members
[2013-12-12 17:10:58.148] User: web Event: Processing simple type reference set members
...
Processing simple type reference set members: 88% [17ms]
[2013-12-12 17:10:59.325] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Finishing simple type reference set member import
[2013-12-12 17:10:59.325] User: web Event: Finishing simple type reference set member import
[2013-12-12 17:10:59.325] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Creating indexes for simple type reference set member import.
[2013-12-12 17:10:59.325] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Creating indexes for simple type reference set member import.
[2013-12-12 17:10:59.325] User: web Event: Creating indexes for simple type reference set member import.
[2013-12-12 17:10:59.334] [OSGi Console] WARN  c.b.s.s.i.rf2.util.ImportUtil - Couldn't create or drop index SNOMEDREFSET_SNOMEDREFSETMEMBER_IDX1000 for table SNOMEDREFSET_SNOMEDREFSETMEMBER.
[2013-12-12 17:10:59.334] [OSGi Console] WARN  c.b.s.s.i.rf2.util.ImportUtil - Couldn't create or drop index SNOMEDREFSET_SNOMEDREFSETMEMBER_IDX1001 for table SNOMEDREFSET_SNOMEDREFSETMEMBER.
Finishing simple type reference set member import: 89% [10ms]
[2013-12-12 17:10:59.335] [OSGi Console] WARN  c.b.s.s.i.rf2.util.ImportUtil - Couldn't create or drop index SNOMEDREFSET_SNOMEDREFSETMEMBER_IDX1002 for table SNOMEDREFSET_SNOMEDREFSETMEMBER.
Finishing simple type reference set member import: 90% [1ms]
[2013-12-12 17:10:59.336] [OSGi Console] WARN  c.b.s.s.i.rf2.util.ImportUtil - Couldn't create or drop index SNOMEDREFSET_SNOMEDREFSETMEMBER_IDX1003 for table SNOMEDREFSET_SNOMEDREFSETMEMBER.
Finishing simple type reference set member import: 91% [1ms]
[2013-12-12 17:10:59.336] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - Removing staging directory '...' from simple type reference set member import.
[2013-12-12 17:10:59.336] [OSGi Console] INFO  c.b.s.s.i.r.m.AbstractSnomedImporter - Removing staging directory '...' from simple type reference set member import.
[2013-12-12 17:10:59.336] User: web Event: Removing staging directory '...' from simple type reference set member import.
Finishing simple type reference set member import: 94% [1ms]
Finishing simple type reference set member import: 100% [0ms]
[2013-12-12 17:10:59.337] [OSGi Console] INFO  c.b.s.s.i.rf2.util.ImportUtil - SNOMED CT import successfully finished.
[2013-12-12 17:10:59.337] User: web Event: SNOMED CT import successfully finished.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that messages related to not being able to create or drop database indexes are not an indication of a failed import process.</p>
</div>
</div>
<div class="sect4">
<h5 id="_import_reference_sets_in_dsv_format">Import reference sets in DSV format</h5>
<div class="paragraph">
<p><code>sctimport dsv_refset</code> imports a single reference set from text files in Delimiter Separated Values (DSV) format. The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sctimport dsv_refset &lt;path&gt; &lt;hasHeader&gt; &lt;skipEmptyLines&gt; &lt;parentConcept&gt;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;path&gt;</dt>
<dd>
<p>Specifies the file to be used for importing</p>
</dd>
<dt class="hdlist1">&lt;hasHeader&gt;</dt>
<dd>
<p>Set to <code>true</code> if the source text file has a header row, <code>false</code> otherwise</p>
</dd>
<dt class="hdlist1">&lt;skipEmptyLines&gt;</dt>
<dd>
<p>Set to <code>true</code> if the source text file has empty lines which should be ignored, <code>false</code> otherwise</p>
</dd>
<dt class="hdlist1">&lt;parentConcept&gt;</dt>
<dd>
<p>Set to an integer value specifying the parent of the imported reference set&#8217;s identifier concept</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Accepted values for parentConcept are:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic" start="0">
<li>
<p>Simple type</p>
</li>
<li>
<p>B2i examples</p>
</li>
<li>
<p>KP Convergent Medical Terminology</p>
</li>
<li>
<p>CORE Problem List</p>
</li>
<li>
<p>Infoway Primary Health Care</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>The reference set name is determined by the input file name; as an example, <code>CamelCase.csv</code> will be converted to
<code>Camel Case reference set</code>. An attempt will be made to interpret the first column of each line as a SNOMED CT
concept identifier. If the identifier can be resolved, a member will be added to the reference set, otherwise
an exception is thrown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; sctimport dsv_refset /path/to/SampleConcepts.txt false true 0
Impersonate operation as: info@b2international.com

Importing Interesting Reference Set...
[2013-12-12 17:22:03.154] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionBeforeCommitting() start
[2013-12-12 17:22:03.154] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionBeforeCommitting() lock acquired for BranchPath{Path='MAIN'}
[2013-12-12 17:22:03.155] [Worker-36] INFO  c.b.s.s.r.s.c.SnomedReasonerChangeProcessor - &gt;&gt;&gt; Processing OWL ontology changes
[2013-12-12 17:22:03.155] [Worker-36] INFO  c.b.s.s.r.s.c.SnomedReasonerChangeProcessor - --- Processing OWL ontology changes: change processing skipped, no ontology instance present for branch or running in embedded mode
[2013-12-12 17:22:03.156] [Worker-36] INFO  c.b.s.s.r.s.c.SnomedReasonerChangeProcessor - &lt;&lt;&lt; Processing OWL ontology changes [249.6 μs]
[2013-12-12 17:22:03.156] [Worker-43] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Processing and updating changes...
[2013-12-12 17:22:03.156] [Worker-43] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Retrieving taxonomic information from store.
[2013-12-12 17:22:03.313] [Worker-42] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Processing changes taxonomic information.
[2013-12-12 17:22:03.313] [Worker-34] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Building taxonomic information.
[2013-12-12 17:22:03.315] [Worker-42] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Rebuilding taxonomic information based on the changes.
[2013-12-12 17:22:03.573] [Taxonomy difference processor] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Calculating taxonomic differences...
[2013-12-12 17:22:03.586] [Worker-43] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Updating reference set membership changes...
[2013-12-12 17:22:03.586] [Worker-43] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Updating taxonomy...
[2013-12-12 17:22:03.602] [Taxonomy difference processor] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Calculating taxonomic differences successfully finished.
[2013-12-12 17:22:03.602] [Worker-43] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Processing and updating changes successfully finished.
[2013-12-12 17:22:03.602] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionBeforeCommitting() end
[2013-12-12 17:22:03.628] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionAfterCommitted() start
[2013-12-12 17:22:03.628] [Worker-36] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Persisting changes...
[2013-12-12 17:22:03.689] [Worker-36] INFO  c.b.s.d.s.s.i.SnomedCDOChangeProcessor - Changes have been successfully persisted.
[2013-12-12 17:22:03.689] User: info@b2international.com Branch: MAIN Event: SNOMED CT Changes: new concepts added: [745288891000154109:Sample Concepts reference set], changed concepts: [446609009:Simple type reference set], new reference sets: [745288891000154109:Sample Concepts reference set],
[2013-12-12 17:22:03.690] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionAfterCommitted() end
[2013-12-12 17:22:03.690] [OSGi Console] INFO  c.b.s.d.s.CDOServerChangeManager - handleTransactionAfterCommitted() lock released for BranchPath{Path='MAIN'}
[2013-12-12 17:22:03.769] [OSGi Console] INFO  c.b.s.d.PostStoreUpdateManager - Commit notification received for user info@b2international.com.
All concepts were imported.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_diagnostics_and_maintenance">Diagnostics and maintenance</h4>
<div class="paragraph">
<p><code>snowowl --version</code> prints the current server version.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt; snowowl --version
 5.8.0</pre>
</div>
</div>
<div class="paragraph">
<p><code>snowowl repositories [id]</code> prints information about all repositories or just a single single repository</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt; snowowl repositories
 ----------------------------------------------------
 |id              |health          |diagnosis       |
 ----------------------------------------------------
 |snomedStore     |GREEN           |-               |
 ----------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p><code>snowowl listbranches [repository]</code> prints all the branches in the system for a repository.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt; snowowl listbranches snomedStore
Branches for repository snomedStore:
|---MAIN
    |---2011-10-01
    |---2012-01-31
    |---2012-07-31
    |---2013-01-31
    |---2013-07-31
    |---2014-01-31
    |---2014-07-31
    |---2015-01-31
        |---SNOMED-CT-SE
            |---2012-12-21
            |---2013-05-31
            |---2013-11-30
            |---2014-05-31
            |---2014-11-30
            |---2015-05-31
    |---2015-07-31
    |---2016-01-31
        |---SNOMED-CT-SE</pre>
</div>
</div>
<div class="paragraph">
<p><code>snowowl dbcreateindex [nsUri]</code> creates the CDO_CREATED index on the proper DB tables for all classes contained by a package identified by its unique namspace URI.</p>
</div>
<div class="paragraph">
<p><code>snowowl reindex [repositoryId]</code> recreates the entire index for the content of the given repository.  This long-running process requires the the server to be shut-down, the index to be deleted manually and a restart before invoking this command.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt;snowowl reindex snomedStore</pre>
</div>
</div>
<div class="paragraph">
<p><code>snowowl optimize [repositoryId] [maxSegments]</code> optimizes the underlying index for the repository to have the supplied maximum number of segments (default number is 1).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt;snowowl optimize snomedStore 6</pre>
</div>
</div>
<div class="paragraph">
<p><code>snowowl purge &lt;repositoryId&gt; &lt;branchPath&gt; &lt;purgeStrategy&gt;</code> optimizes the underlying index by deleting unnecessary documents from the given branch using the given purge strategy (default strategy is LATEST, available strategies are ALL, LATEST, HISTORY)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>osgi&gt;snowowl purge snomedStore MAIN/2016-01-31 ALL</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_session_management">Session management</h4>
<div class="sect4">
<h5 id="_display_connected_users_and_session_identifiers">Display connected users and session identifiers</h5>
<div class="paragraph">
<p>To list all connected users (and the unique session ID), run the following OSGi command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session users

User: akitta@b2international.com | session ID: 3
User: obali@b2international.com | session ID: 4
User: zstorok@b2international.com | session ID: 5
User: apeteri@b2international.com | session ID: 6</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_send_message_to_users">Send message to users</h5>
<div class="paragraph">
<p>To send message to all connected users, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session message ALL Some message from the administrator.

Message sent to akitta@b2international.com
Message sent to obali@b2international.com
Message sent to zstorok@b2international.com
Message sent to apeteri@b2international.com</pre>
</div>
</div>
<div class="paragraph">
<p>All connected client will receive the message via a dialog.</p>
</div>
<div class="paragraph">
<p>For sending message to a subset of recipient users, execute the following OSGi command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session message obali@b2international.com,zstorok@b2international.com Message from the administrator to Orsi and Zsolt.

Message sent to obali@b2international.com
Message sent to zstorok@b2international.com</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_restrict_user_logins">Restrict user logins</h5>
<div class="paragraph">
<p>Administrator may restrict non-administrator user log in to the sever with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login disabled

Disabled non-administrative logins.</pre>
</div>
</div>
<div class="paragraph">
<p>Users will not be able to connect to the server while non-administrator log in is disabled. Clients will receive the
following when trying to connect to the server from the splash screen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Logging in for non-administrator users is temporarily disabled.</pre>
</div>
</div>
<div class="paragraph">
<p>Invoking this command will not disconnect any of the connected non-administrator users. The way how to disconnect
clients from the server will be discussed below.</p>
</div>
<div class="paragraph">
<p>To re-enable non-administrator log in onto the server refer to the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login enabled

Enabled non-administrative logins.</pre>
</div>
</div>
<div class="paragraph">
<p>The status can be checked with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session login status

Non-administrative logins are currently enabled.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_disconnect_users">Disconnect users</h5>
<div class="paragraph">
<p>To disconnect a subset of connected users from the server, the following command should be performed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session disconnect akitta@b2international.com,apeteri@b2international.com

User: akitta@b2international.com ,session id: 3 was disconnected.
User: apeteri@b2international.com ,session id: 6 was disconnected.</pre>
</div>
</div>
<div class="paragraph">
<p>All disconnected users will receive a message about the lost connection. Then client application could be closed
gracefully. This will not prevent users to reconnect the server.</p>
</div>
<div class="paragraph">
<p>The recommended way to ensure that none of the users are connected to the server when performing any single system
administrator task is the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Disable non-administrator log in in the server</p>
</li>
<li>
<p>Notify users about the upcoming system admin operation</p>
</li>
<li>
<p>Disconnect all users</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_repository_management">Repository management</h4>
<div class="sect4">
<h5 id="_display_terminology_repositories">Display terminology repositories</h5>
<div class="paragraph">
<p>To list all available repositories and their identifiers, one should execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session repositories

   LOINC Store [ID: loincStore]
   Local Code System Store [ID: localterminologyStore]
   Terminology Metadata Store [ID: terminologyregistryStore]
   ICD-10 Store [ID: icd10Store]
   Value Set Store [ID: valuesetStore]
   ATC Store [ID: atcStore]
   SNOMED CT Store [ID: snomedStore]
   Mapping Set Store [ID: mappingsetStore]
   ICD-10-AM Store [ID: icd10amStore]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_display_currently_held_locks">Display currently held locks</h5>
<div class="paragraph">
<p>To view a table of acquired locks, their targets and owners, execute the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session showlocks
No locks are currently granted on this server.

osgi&gt; session lock allrepositories
Acquired lock for all repositories.

osgi&gt; session showlocks

  Id | Lvl | Created on       | Locked area       | Owner context
------------------------------------------------------------------------------------------------------
   0 |   1 | 2014-01-31 21:16 | All repositories  | Lock owner: System
     |     |                  |                   | Performing maintenance from the server console
------------------------------------------------------------------------------------------------------

 osgi&gt; session lock allrepositories
 Acquired lock for all repositories.

  Id | Lvl | Created on       | Locked area       | Owner context
------------------------------------------------------------------------------------------------------
   0 |   2 | 2014-01-31 21:16 | All repositories  | Lock owner: System
     |     |                  |                   | Performing maintenance from the server console
------------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locks can be acquired for different purposes, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>administrative maintenance</p>
</li>
<li>
<p>backup</p>
</li>
<li>
<p>saving editors</p>
</li>
<li>
<p>classification</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Their area of effect can also vary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all terminology stores</p>
</li>
<li>
<p>a single terminology store</p>
</li>
<li>
<p>a single branch of a particular terminology store</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once a lock owner obtains a lock, the associated area is available for their use only; others will receive indications
that someone else is already working on something which requires uninterrupted access to the target area. Lock attempts
on the same or overlapping areas will not be able to complete until the lock is released.</p>
</div>
<div class="paragraph">
<p>The "Lvl" column indicates the "nesting" count of a granted lock; when someone holds a lock, they can lock the same
area multiple times. Ownership is only released when the level decreases to 0.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lock_and_release_areas_of_terminology_stores">Lock and release areas of terminology stores</h5>
<div class="paragraph">
<p>To lock all terminology stores simultaneously, issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session lock allrepositories
Acquired lock for all repositories.</pre>
</div>
</div>
<div class="paragraph">
<p>If a conflicting lock has already been acquired by a different owner, the reason for not granting this request will be
displayed in the response.</p>
</div>
<div class="paragraph">
<p>To lock all branches of a single terminology store, refer to the repository identifiers returned by the
<code>session repositories</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; session lock snomedStore
Acquired lock for repository 'snomedStore'.</pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, for locking a single branch of a single repository, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session lock snomedStore MAIN/a
Acquired lock for branch 'MAIN/a' of repository 'snomedStore'.

osgi&gt; session showlocks

  Id | Lvl | Created on       | Locked area                              | Owner context
-----------------------------------------------------------------------------------------------------------------------------
   0 |   1 | 2014-01-31 21:16 | All repositories                         | Lock owner: System
     |     |                  |                                          | Performing maintenance from the server console
-----------------------------------------------------------------------------------------------------------------------------
   1 |   1 | 2014-01-31 21:30 | Repository 'snomedStore'                 | Lock owner: System
     |     |                  |                                          | Performing maintenance from the server console
-----------------------------------------------------------------------------------------------------------------------------
   2 |   1 | 2014-01-31 21:30 | Branch 'MAIN' of repository 'snomedStore'| Lock owner: System
     |     |                  |                                          | Performing maintenance from the server console
-----------------------------------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>The branch path argument is case sensitive; as an example, <code>main</code>, <code>Main</code>, <code>main/a</code> and <code>Main/a</code> branch paths would be
invalid arguments.</p>
</div>
<div class="paragraph">
<p>Releasing an owned lock can be performed by executing a corresponding <code>session unlock</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session unlock snomedStore MAIN
Released lock for branch 'MAIN' of repository 'snomedStore'.

osgi&gt; session showlocks

  Id | Lvl | Created on       | Locked area             | Owner context
------------------------------------------------------------------------------------------------------------
   0 |   1 | 2014-01-31 21:16 | All repositories        | Lock owner: System
     |     |                  |                         | Performing maintenance from the server console
------------------------------------------------------------------------------------------------------------
   1 |   1 | 2014-01-31 21:30 | Repository 'snomedStore'| Lock owner: System
     |     |                  |                         | Performing maintenance from the server console
------------------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Regular save operations try to get the lock for their target repository and branch. If the administrator
has already taken over an area by using the commands above, a dialog will be displayed when the
user tries to save after approx. 5 seconds of waiting for the lock to be granted.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_forcefully_unlock_stuck_locks">Forcefully unlock stuck locks</h5>
<div class="paragraph">
<p>If an operation gets stuck, or otherwise fails to release locks for which the System user is not the owner, other
users may be blocked indefinitely as a result. To resolve the situation, one can forcefully unlock such locks
by referring to their identifier shown in the table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; session forceunlock 1
Forcefully released lock with identifier 1.

 osgi&gt; session showlocks

  Id | Lvl | Created on       | Locked area             | Owner context
------------------------------------------------------------------------------------------------------------
   0 |   1 | 2014-01-31 21:16 | All repositories        | Lock owner: System
     |     |                  |                         | Performing maintenance from the server console
------------------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>To forcefully release all locks, use the command with the <code>all</code> argument instead of the identifier.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_remote_jobs">Remote jobs</h4>
<div class="paragraph">
<p>Remote jobs are long-running operations intended to be executed on the server; the requesting user&#8217;s client need not
be kept open while the job is active. The result of these computations can be checked immediately, or at a later time,
if the results are still available for review. The administration console provides two commands for listing currently
running remote jobs, and requesting cancellation of these items.</p>
</div>
<div class="sect4">
<h5 id="_display_remote_jobs">Display remote jobs</h5>
<div class="paragraph">
<p>To list all currently scheduled, running, or finished remote jobs, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>osgi&gt; remotejobs list

  Id | Description                      | Owner            | Scheduled        | Started          | Status
------------------------------------------------------------------------------------------------------------
   0 | Batch ontology generation        | info@b2intern... | 2014-03-20 11:03 | 2014-03-20 11:03 | Finished
------------------------------------------------------------------------------------------------------------
   1 | Classifying the ontology on MAIN | info@b2intern... | 2014-03-20 11:13 | 2014-03-20 11:13 | Finished
------------------------------------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Note that identifiers in the first column can change at any time if, for example, the initiator of the task removes
a completed job from their list.)</p>
</div>
</div>
<div class="sect4">
<h5 id="_cancel_remote_job">Cancel remote job</h5>
<div class="paragraph">
<p>To signal a remote job that it should finish its work at the closest possible occasion without completing it fully,
use the following command with the identifier from the list displayed above. If <code>remotejobs list</code> was not invoked earlier,
the following message will be printed to the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; remotejobs cancel 0
Please retrieve the list of currently scheduled or running jobs first.</pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise, when a valid job identifier is given, the following output should appear:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>osgi&gt; remotejobs cancel 0
Requesting job 0 to cancel.</pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and an additional invocation of <code>remotejobs list</code> should list the given job&#8217;s status as "Cancel requested".</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Not all remote jobs are able to react to cancel requests.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_reference">Configuration reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Snow Owl Server comes with a predefined default configuration file, which can be used to tweak various system parameters.
The configuration file is in YAML format, and located at <code>/opt/snowowl-{edition}_{version}/snowowl_config.yml</code>. You
can read more about how to create/write such files here: <a href="http://en.wikipedia.org/wiki/YAML" class="bare">http://en.wikipedia.org/wiki/YAML</a>.</p>
</div>
<div class="paragraph">
<p>The configuration file has a hierarchical structure, which is defined by modules. Different modules can have different
configurations, a module is defined by its name, which should start a line in the file. Configuration parameters in a
module should be indented by two spaces following the module&#8217;s name.</p>
</div>
<div class="paragraph">
<p>The next section contains the reference of our currently supported configuration parameters. Each parameter should be
present in a module configuration as described above.</p>
</div>
<div class="paragraph">
<p>Snow Owl Server refuses to start if the configuration file contains syntactical or structural errors. The cause of the
problem can be found in the <code>log.log</code> file, or in the console if you&#8217;ve redirected the output of the server&#8217;s startup
process.</p>
</div>
<div class="sect2">
<h3 id="_identity_providers">Identity Providers</h3>
<div class="paragraph">
<p>Snow Owl supports multiple identity provider configurations (by default File and LDAP are available, but others can be added as well).</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">providers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>file</code>, <code>ldap</code> - choose the enabled identity providers, you can select multiple options as well.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>identity:
  providers:
    - &lt;provider_type&gt;:
        &lt;provider_config_key&gt;: &lt;provider_config_value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To configure an identity provider you must add its configuration to the list of available providers (<code>identity.providers</code> config node).
The providers list ensures ordered execution of the various providers, the first (top) provider will be invoked first, then the second and so forth.
See the next sections on how to configure File and LDAP identity providers.</p>
</div>
<div class="sect3">
<h4 id="_file_identity_provider">File Identity Provider</h4>
<div class="paragraph">
<p>File identity provider supports authentication of a set of users available in the specified configuration file.
You can specify the name of the configuration file, which should be placed in the server&#8217;s configuration directory.
Example configuration to use File identity provider based on a property file at <code>${SERVER_HOME}/configuration/users</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>identity:
  providers:
    - file:
        name: users</pre>
</div>
</div>
<div class="paragraph">
<p>File identity provider does <strong>NOT</strong> support authorization features (such as Roles and Permissions). We recommend the LDAP identity provider for such deployments.
To allow a user to authenticate with the File identity provider you must declare the user&#8217;s username and hashed (with BCrypt hash algorithm) password in the property file in the following form:</p>
</div>
<div class="paragraph">
<p>Example property file content for File identity provider:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>snowowl:$2a$10$RtnN9fxuxjz3W7drWtxpT.2BblCxsJ0WL2Fl14XBCjMrMaqq.uenW</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ldap_identity_provider">LDAP Identity Provider</h4>
<div class="paragraph">
<p>LDAP identity provider uses an external LDAP server (preferably OpenLDAP) to authenticate and retrieve user identities. This provider does support authorization features, such as Roles and Permissions.
Example configuration to use LDAP identity provider:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>identity:
  providers:
    - ldap:
        uri: ldap://localhost:10389
        baseDn: dc=snowowl,dc=b2international,dc=com
        rootDn: cn=admin,dc=snowowl,dc=b2international,dc=com
        rootDnPassword: &lt;adminpwd&gt;
        userIdProperty: uid</pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">uri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">``</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ldap://&lt;host&gt;:&lt;port&gt;</code> - LDAP host and port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">baseDn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dc=snowowl,dc=b2international,dc=com</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base Dn value of the organization from which user identities will be retrieved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rootDn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cn=admin,dc=snowowl,dc=b2international,dc=com</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root user&#8217;s DN value, to bind to the LDAP server with.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rootDnPassword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">``</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root user&#8217;s password, to bind to the LDAP server with.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userIdProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">``</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user ID property which will contain the unique identifier of your users (usually uid, which represent an email address).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">usePool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To use a connection pool under the hood when connecting to the external LDAP server or not.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_repository">Repository</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.0.0.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host name to bind to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2036</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port of the chosen network interface to use when listening for connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberOfWorkers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 x NumberOfCores</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of worker threads to assign to a repository during initialization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">revisionCache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable CDO revision cache to keep data returned from the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readerPoolCapacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capacity of the reader pool associated with the SNOMED CT store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">writerPoolCapacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capacity of the writer pool associated with the SNOMED CT store.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>repository:
  host: 0.0.0.0
  port: 2036</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_database_2">Database</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>store</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory of the embedded database inside the global resources folder where the application should look for the database files by default (if no location parameter is given).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the database adapter to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">driverClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.h2.Driver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified name of the driver&#8217;s Java class to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">datasourceClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.h2.jdbcx.JdbcDataSource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified name of the datasource&#8217;s Java class to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scheme</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jdbc:h2:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The scheme to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">location</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the database when connecting to it. If not set then in embedded mode the default directory parameter will be used as location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">username</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username of the database user to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the database user to use when connecting to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">settings</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Other database specific JDBC settings to use when connecting to the database.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>repository:
  database:
    directory: store
    type: h2
    username: admin
    password: admin</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_index">Index</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commitInterval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The commit interval of an index in milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queryWarnThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>400</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the warn log when querying data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queryInfoThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>300</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the info log when querying data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queryDebugThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the debug log when querying data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queryTraceThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>50</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the trace log when querying data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fetchWarnThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the warn log when fetching data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fetchInfoThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the info log when fetching data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fetchDebugThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>50</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the debug log when fetching data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fetchTraceThreshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The threshold of the trace log when fetching data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberOfShards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of shards to use for terminology repositories.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commitConcurrencyLevel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number of cores / 4 by default, min 1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of concurrent requests when executing bulk commit operations against a terminology repository index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clusterUrl</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remote Elasticsearch cluster to connect to and use for terminology repository indexes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clusterUsername</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username to use when connecting to a remote Elasticsearch cluster that requires Basic authentication credentials. <code>clusterUrl</code> is required for this option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clusterPassword</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to use when connecting to a remote Elasticsearch cluster that requires Basic authentication credentials. <code>clusterUrl</code> is required for this option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines how long should an Elasticsearch request wait for the HTTP connection to be established before failing the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">socketTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines how long should an Elasticsearch request wait for a response failing the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clusterHealthTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>300000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines how long should the initialization of the embedded Elasticsearch wait for at least yellow cluster health state.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>repository:
  index:
    commitInterval: 5000
    translogSyncInterval: 1000
    queryWarnThreshold: 400
    fetchInfoThreshold: 100</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rpc">RPC</h3>
<div class="paragraph">
<p>RPC is a custom protocol implementation used to solve request-response based communication between a client and a server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Changing these settings is not recommended and currently unsupported in production environments.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code>, <code>false</code>, <code>ON</code>, <code>OFF</code> - enable or disable verbose logging during RPC communication</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>rpc:
  logging: true</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metrics">Metrics</h3>
<div class="paragraph">
<p>Snow Owl can measure and report execution times (and other metrics in the future) of executed requests.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code>, <code>false</code>, <code>ON</code>, <code>OFF</code> - enable or disable metrics in the application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_snomed_ct_2">SNOMED CT</h3>
<div class="paragraph">
<p>Configuration of SNOMED CT terminology services.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readerPoolCapacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capacity of the reader pool associated with the SNOMED CT store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">writerPoolCapacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The capacity of the writer pool associated with the SNOMED CT store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>en-gb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>en-gb</code>, <code>en-us</code>, <code>en-sg</code> - The language code to use for SNOMED CT Descriptions. Descriptions with membership of the chosen
language&#8217;s reference set will be used runtime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxReasonerCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of reasoners permitted to do computation simultaneously. Minimum <code>1</code>, maximum <code>3</code> is allowed. If the value is set to
<code>1</code>, classification requests will be processed in a sequential fashion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxReasonerResults</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of inferred taxonomies that should be kept in memory after the reasoner completes the computational stage. The user can only
choose to save the results of the classification run if the corresponding taxonomy instance is still present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxReasonerRuns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of classification runs of which details should be preserved on disk. Details include inferred and redundant relationships,
the list of equivalent concepts found during classification, and classification run metadata (start and end times, status, requesting user,
reasoner used for this run).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">showReasonerUsageWarning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'true' will display a dialog if any user selects a non-ELK reasoner, citing memory and compatibility problems, also recommending to contact B2i.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">concreteDomainSupport</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'true' will turn on support for concrete domains.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inferredEditingEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'true' will enable manual editing of inferred relationships and concrete domain elements.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>snomed:
  language: en-gb
  maxReasonerCount: 1
  maxReasonerResults: 20
  showReasonerUsageWarning: true
  concreteDomainSupport: true
  inferredEditingEnabled: false</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_snomed_ct_component_identifier_configuration">SNOMED CT Component Identifier Configuration</h3>
<div class="paragraph">
<p>Snow Owl&#8217;s SNOMED CT identifier service can be configured to be either using the built-in service or SNOMED International&#8217;s external Component Identifier Service (CIS). The configuration needs to be placed within the <strong>snomed/ids</strong> section.
If omitted, then default configuration will be used, which is the built-in (embedded) service based on the index store allocating ids in a sequential fashion.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EMBEDDED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EMBEDDED</code> or <code>CIS</code> - The service used to generate ids.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INDEX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INDEX</code> or <code>MEMORY</code> - The source of the generated ids.  <code>MEMORY</code> is used for testing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEQUENTIAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SEQUENTIAL</code> or <code>RANDOM</code> - The strategy of the id generation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisBaseUrl</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The service&#8217;s URL with port and without context root.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisContextRoot</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context root of the id generation service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisUserName</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The registered user name at the CIS site.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisPassword</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the registered user name at the CIS site.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisClientSoftwareKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Snow Owl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The client software key to be persisted within CIS as reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisNumberOfPollTries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of tries when polling jobs of bulk requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisTimeBetweenPollTries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time to wait between 2 job polling actions It is in milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisNumberOfReauthTries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of re-authentication attempts when a 401 Not authorized response is received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cisMaxConnections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of simultaneous connections that Snow Owl can make to the CIS host via HTTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxIdGenerationAttempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of attempts any non-CIS ID generator will take to generate a single SNOMED CT identifier, if exceeded it throws an exception.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example for using the built-in service with random ids using the index as the source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>snomed:
  ...
  ids:
    service: EMBEDDED
    source: INDEX
    strategy : RANDOM
    cisBaseUrl : &lt;cis_host_and_port&gt;
    cisContextRoot : api
    cisUserName : &lt;your-cis-username&gt;
    cisPassword : &lt;your-cis-password&gt;
    cisClientSoftwareKey : Snow Owl dev. deployment
    cisNumberOfPollTries : 1
    cisTimeBetweenPollTries : 1000
    cisMaxConnections: 100
  ...</pre>
</div>
</div>
<div class="paragraph">
<p>Example for using IHTSDO&#8217;s external CIS service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>snomed:
  ...
  ids:
    service : CIS
    cisBaseUrl : &lt;cis_host_and_port&gt;
    cisContextRoot : api
    cisUserName : &lt;your-cis-username&gt;
    cisPassword : &lt;your-cis-password&gt;
    cisClientSoftwareKey : Snow Owl dev. deployment
    cisNumberOfPollTries : 1
    cisTimeBetweenPollTries : 1000
    cisMaxConnections: 100
  ...</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-07-03 11:15:33 CEST
</div>
</div>
</body>
</html>